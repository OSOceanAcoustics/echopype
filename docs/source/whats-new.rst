What's new
==========

See `GitHub releases page <https://github.com/OSOceanAcoustics/echopype/releases>`_ for the complete history.

v0.4.1 (2020 Oct 20)
--------------------

Patches and enhancements to file conversion

This minor release includes the following changes:

Bug fixes
~~~~~~~~~

- Fix bug in top level .nc output when combining multiple AZPF `.01A` files
- Correct time stamp for `.raw` MRU data to be from the MRU datagram, instead of those from the RAW3 datagrams (although they are identical from the test files we have).
- Remove unused parameter `sa_correction` from broadband `.raw` files
- Make sure import statement works on Google colab

Enhancements
~~~~~~~~~~~~

- Parse Simrad EK80 config XML correctly for data generated by WBAT and WBT Mini, and those involving the 2-in-1 "combi" transducer
- Parse Simrad `.raw` files with `NME1` datagram, such as files generated by the Simrad EA640 echosounder
- Handle missing or partially valid GPS data in `.raw` files by padding with NaN
- Handle missing MRU data in `.raw` files by padding with NaN
- Parse `.raw` filename with postfix beyond HHMMSS
- Allow export EK80 XML configuration datagram as a separate XML file

Notes
~~~~~

To increase maintenance efficiency and code readability we are refactoring the `convert` and `process` modules. Some usage of these modules will change in the next major release.


v0.4.0 (2020 Jun 24)
--------------------

Add EK80 conversion, rename subpackage model to process

New features
~~~~~~~~~~~~

- Add EK80 support:
  - File conversion from EK80 `.raw` files to netCDF and zarr formats
  - "Simple" calibration to frequency-average Sv based on pulse compression output is implemented but needs to be thoroughly tested.
- Rename subpackage `echopype.model` to `echopype.process`
  - The new name better describes the subpackage's function to process data for further analysis
  - Also rename class `EchoData` to `Process` to mirror the structure in `Convert` better.
  - Importing using the old names will be deprecated in the next release.
- Overhaul converting multiple files with `combine_opt=True`
  - If target format is netCDF, temporary files will be created and finally combined to a single netCDF. This is due to current restriction that xarray does not allow simply appending new data to an existing file.
  - If target format is zarr, data in each file are unpacked and appended to the same output file.
- Allow reading Zarr into `Process` in addition to netCDF: thanks @lsetiawan!
- Add a logo!

Bug fixes
~~~~~~~~~

Fix bugs in slicing NMEA group data based on the same time base when `range_bin` is changed
