# Descriptions retrieved from link below
# https://www.ices.dk/sites/pub/Publication%20Reports/Cooperative%20Research%20Report%20(CRR)/CRR341.pdf
# Page 8. Section 2.2.
name: The SONAR-netCDF4 convention for sonar data
version: 1.0
release_date: "2018-05"
organization:
  name: ICES
  description: INTERNATIONAL COUNCIL FOR THE EXPLORATION OF THE SEA
groups:
  top:
    name: Top-level
    description: contains metadata about the SONAR-netCDF4 file format.
    ep_group:
  environment:
    name: Environment
    description: contains information relevant to acoustic propagation through water.
    ep_group: Environment
    coords_ek60: ['frequency', 'ping_time']
    coords_ek80: ['ping_time']
    coords_azfp: ['ping_time']
    coords_ad2cp: ['ping_time', 'ping_time_burst', 'ping_time_average', 'ping_time_echosounder']
  platform:
    name: Platform
    description: contains information about the platform on which the sonar is installed.
    ep_group: Platform
    coords_ek60: ['location_time', 'ping_time', 'frequency']
    coords_ek80: ['mru_time', 'location_time']
    coords_azfp: []
    coords_ad2cp: ['ping_time', 'ping_time_burst', 'ping_time_average', 'ping_time_echosounder', 'beam',
                   'range_sample_burst', 'range_sample_average', 'range_sample_echosounder']
  nmea:
    name: Platform/NMEA
    description: contains information specific to the NMEA protocol.
    ep_group: Platform/NMEA
    coords_ek60: ['location_time']
    coords_ek80: ['location_time']
    coords_azfp: ['location_time']
    coords_ad2cp: ['location_time']
  provenance:
    name: Provenance
    description: contains metadata about how the SONAR-netCDF4 version of the data were obtained.
    ep_group: Provenance
    coords_ek60: []
    coords_ek80: []
    coords_azfp: []
    coords_ad2cp: []
  sonar:
    name: Sonar
    description: contains specific metadata for the sonar system.
    ep_group: Sonar
    coords_ek60: ['beam']
    coords_ek80: ['beam', 'frequency']
    coords_azfp: ['beam']
    coords_ad2cp: []
  beam:
    name: Sonar/Beam_group1
    description: >-
      contains backscatter data (either complex samples or uncalibrated power samples)
      and other beam or channel-specific data, including split-beam angle data when they exist.
    ep_group: Sonar/Beam_group1
    coords_ek60: ['frequency', 'ping_time', 'range_sample']
    coords_ek80: ['frequency', 'ping_time', 'range_sample', 'quadrant']  # will contain quadrant only if it is complex
    coords_azfp: ['frequency', 'ping_time', 'range_sample']
    coords_ad2cp: ['ping_time', 'ping_time_burst', 'ping_time_average', 'ping_time_echosounder', 'beam',
                   'range_sample_burst', 'range_sample_average', 'range_sample_echosounder', 'altimeter_sample_bin']
  beam_power:
    name: Sonar/Beam_group2
    description: >-
      contains backscatter power (uncalibrated) and other beam or channel-specific data,
      including split-beam angle data when they exist.
      Only exists if complex backscatter data they already in Sonar/Beam_group1
    ep_group: Sonar/Beam_group2
    coords_ek60: []
    coords_ek80: ['frequency', 'ping_time', 'range_sample']
    coords_azfp: []
    coords_ad2cp: []
  vendor:
    name: Vendor specific
    description: contains vendor-specific information about the sonar and the data.
    ep_group: Vendor
    coords_ek60: ['frequency', 'pulse_length_bin']
    coords_ek80: ['frequency', 'pulse_length_bin', 'cal_frequency', 'cal_channel_id']
    coords_azfp: ['frequency', 'ping_time', 'ancillary_len', 'ad_len']
    coords_ad2cp: ['ping_time', 'ping_time_burst', 'ping_time_average', 'ping_time_echosounder',
                   'ping_time_echosounder_raw', 'ping_time_echosounder_raw_transmit',
                   'ping_time_echosounder_raw_transmit', 'sample', 'sample_transmit', 'beam', 'range_sample_average',
                   'range_sample_burst', 'range_sample_echosounder']
variable_and_varattributes:
  # Convention-based global, coordinate and variable attributes
  beam_coord_default:
    frequency:
      long_name: Transducer frequency
      standard_name: sound_frequency
      units: Hz
    valid_min: 0.0
    ping_time:
      long_name: Timestamp of each ping
      standard_name: time
      axis: T
    range_bin:
      long_name: Along-range bin (sample) number, base 0
  platform_coord_default:
    location_time:
      axis: T
      long_name: Timestamps for NMEA datagrams
      standard_name: time
  platform_var_default:
    latitude:
      long_name: Platform latitude
      standard_name: latitude
      units: degrees_north
      valid_range: (-90.0, 90.0)
    longitude:
      long_name: Platform longitude
      standard_name: longitude
      units: degrees_east
      valid_range: (-180.0, 180.0)
    pitch:
      long_name: Platform pitch
      standard_name: platform_pitch_angle
      units: arc_degree
      valid_range: (-90.0, 90.0)
    roll:
      long_name: Platform roll
      standard_name: platform_roll_angle
      units: arc_degree
      valid_range: (-90.0, 90.0)
    heave:
      long_name: Platform heave
      standard_name: platform_heave_angle
      units: arc_degree
      valid_range: (-90.0, 90.0)
    water_level:
      long_name: z-axis distance from the platform coordinate system origin to the sonar transducer
      units: m
